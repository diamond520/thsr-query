# Codebase Structure

**Analysis Date:** 2026-02-19

## Directory Layout

```
thsr-query/
├── public/                 # Static assets and HTML entry point
│   ├── index.html         # HTML template for webpack injection
│   └── favicon.ico        # Browser favicon
├── src/                    # Application source code
│   ├── api/               # API service layer
│   │   └── thrs-api.js    # THSR API endpoint functions
│   ├── assets/            # Static assets and global styles
│   │   ├── style.scss     # Global application styles
│   │   └── logo.png       # Application logo (unused)
│   ├── components/        # Reusable Vue components
│   │   ├── byTime.vue     # Query trains by station and time
│   │   ├── byTrainNo.vue  # Query train stops by train number
│   │   ├── byStation.vue  # Query seat availability by station
│   │   └── HelloWorld.vue # (Unused placeholder component)
│   ├── router/            # Vue Router configuration
│   │   └── index.js       # Route definitions and router instance
│   ├── store/             # Vuex state management
│   │   └── index.js       # Vuex store (state, mutations, actions, getters)
│   ├── utils/             # Utility functions
│   │   └── request.js     # Axios instance with interceptors
│   ├── views/             # Page-level components for routes
│   │   ├── Home.vue       # Main application page with tabbed interface
│   │   └── About.vue      # About page (placeholder)
│   ├── App.vue            # Root component with router-view
│   └── main.js            # Application entry point
├── docs/                  # Documentation and build output
│   ├── css/              # Built CSS files
│   ├── fonts/            # Font files
│   └── js/               # Built JavaScript files
├── .planning/             # GSD planning documents
│   └── codebase/         # Codebase analysis documents
├── .eslintrc.js           # ESLint configuration
├── babel.config.js        # Babel transpiler configuration
├── .browserslistrc        # Browser support specification
├── .gitignore             # Git ignore rules
├── package.json           # Project dependencies and scripts
├── yarn.lock              # Yarn lock file (locked dependencies)
└── README.md              # Project documentation
```

## Directory Purposes

**public/**
- Purpose: Static assets served at build time; index.html is webpack entry point
- Contains: HTML template, favicon
- Key files: `index.html` (webpack injects built bundles here)

**src/**
- Purpose: Application source code root; all development code lives here
- Contains: Components, views, styles, utilities, API layer, routing, state management
- Key files: `main.js` (bootstrap), `App.vue` (root component)

**src/api/**
- Purpose: API service layer abstracting external API calls
- Contains: Functions wrapping axios requests to THSR API endpoints
- Key files: `thrs-api.js` (all endpoint functions: getStations, getDailyTimetable, etc.)

**src/assets/**
- Purpose: Static assets and global styles
- Contains: CSS/SCSS files for global theming, image assets
- Key files: `style.scss` (global styles with Element UI header/footer colors)

**src/components/**
- Purpose: Reusable Vue components for feature implementation
- Contains: Feature-focused components (not full pages)
- Key files:
  - `byTime.vue` (most complex - form, validation, sorting, pagination, time calculations)
  - `byTrainNo.vue` (train number lookup with remote select)
  - `byStation.vue` (seat availability query with nested table display)

**src/router/**
- Purpose: Vue Router configuration and route definitions
- Contains: Route array, router instance, lazy-loading setup
- Key files: `index.js` (defines '/' Home route, '/about' About route with lazy load)

**src/store/**
- Purpose: Vuex centralized state management
- Contains: State, mutations, actions, getters for shared application data
- Key files: `index.js` (stores stations array; getStations action; stations getter with transformation)

**src/utils/**
- Purpose: Utility functions used across application
- Contains: Request/HTTP client with interceptors
- Key files: `request.js` (axios instance with baseURL, timeout, response error handling)

**src/views/**
- Purpose: Page-level components rendered by Vue Router
- Contains: Full-page components with routing
- Key files:
  - `Home.vue` (main app page - renders header and three tabbed components)
  - `About.vue` (placeholder page)

**docs/**
- Purpose: Build output directory (generated by build process)
- Contains: Built/transpiled CSS, JS, and font files
- Generated: Yes (do not commit source, only built files)
- Committed: Likely committed (static files for deployment)

**.planning/**
- Purpose: GSD planning and codebase analysis documents
- Contains: Architecture analysis, structure documentation, conventions, etc.
- Generated: No (manually created by analysis)
- Committed: Yes

## Key File Locations

**Entry Points:**
- `src/main.js`: Bootstraps Vue app, mounts to #app element, initializes router and store
- `public/index.html`: HTML template containing div#app for Vue mount point
- `src/App.vue`: Root Vue component with router-view outlet

**Configuration:**
- `package.json`: Project metadata, dependencies (Vue 2, axios, element-ui, vuex, vue-router)
- `.eslintrc.js`: ESLint rules (extends vue/essential, eslint:recommended; disables console in prod)
- `babel.config.js`: Babel preset for Vue CLI transpilation
- `.browserslistrc`: Browser support targets (> 1%, last 2 versions)

**Core Logic:**
- `src/store/index.js`: Central Vuex store for stations state
- `src/api/thrs-api.js`: API service functions (getStations, getDailyTimetable, getGeneralTimetable, getGeneralTimetablebyTrainNo, getAvailableSeatStatusList)
- `src/utils/request.js`: Axios instance with request/response interceptors, baseURL set to https://ptx.transportdata.tw/MOTC/v2/Rail/THSR

**Routing:**
- `src/router/index.js`: Vue Router configuration (history mode, routes for Home and About)

**Styling:**
- `src/assets/style.scss`: Global styles (Element UI header/footer color override #DF7818)
- `src/App.vue`: App-level styles (font, color palette)
- Individual component scoped styles in .vue files

## Naming Conventions

**Files:**
- Vue components: camelCase + .vue extension (e.g., `byTime.vue`, `byStation.vue`)
- JavaScript utilities: camelCase + .js extension (e.g., `request.js`)
- Directories: lowercase single word or hyphenated (e.g., `api`, `components`, `router`)
- Vue files in views: PascalCase (e.g., `Home.vue`, `About.vue`) - common pattern for page components

**Directories:**
- Feature directories (api, components, store, router, utils, views): lowercase, plural/semantic names
- No subdirectories within api, router, store (all files at same level)

**Vue Components (internal):**
- Local component names in templates: camelCase (e.g., `<byTime></byTime>`)
- Component object property: `name: 'Home'` uses PascalCase

**Methods and Functions:**
- camelCase: `getDailyTimetable`, `getStations`, `onSubmit`, `getTimetable`, `diffTime`
- Vuex mutations: camelCase with descriptive verb + noun (e.g., `setStations`)
- Vuex actions: camelCase matching intent (e.g., `getStations`)
- Vue lifecycle hooks: camelCase (mounted, computed, methods)

**Variables:**
- Local state: camelCase (e.g., `form`, `timetable`, `stations`, `activeName`)
- Props: camelCase (e.g., `:model="form"`, `:rules="rules"`)
- Constants: Not observed in codebase (hardcoded values used directly)

**CSS Classes:**
- Element UI classes: kebab-case with el- prefix (e.g., `el-form`, `el-button`, `el-table`)
- Custom classes: kebab-case (e.g., `box-card`, `success-row`)

## Where to Add New Code

**New Query Feature (e.g., new search type):**
- Primary code: `src/components/byXxx.vue` (new component following byTime/byStation pattern)
- API endpoint: Add new function to `src/api/thrs-api.js`
- Store integration: If data shared across components, add mutation/action/getter to `src/store/index.js`
- Routing: Add to routes array in `src/router/index.js` if full page; otherwise embed in existing view

**New Page/Route:**
- Page component: `src/views/NewPage.vue`
- Route definition: Add object to routes array in `src/router/index.js`
- Navigation: Add router-link in header or menu (currently not implemented - manual URL navigation only)

**Reusable Component (shared across features):**
- Location: `src/components/NewComponent.vue`
- Pattern: Accept props for data, emit events for user actions
- Import in parent components via `import NewComponent from '@/components/NewComponent.vue'`

**Utilities (helper functions):**
- Time helpers: Add methods to component or extract to `src/utils/time.js`
- Data transforms: Add filter functions or extracted logic in `src/utils/transforms.js`
- HTTP: Extend `src/utils/request.js` for custom interceptors or middleware

**Global State (shared data across unrelated components):**
- Location: `src/store/index.js`
- Pattern: Add state property, mutation to set it, action to populate it, getter to access/transform it
- Usage: Import mapGetters/mapActions in components, use in computed/methods

**Styling:**
- Global styles: `src/assets/style.scss` for app-wide theming
- Component styles: Scoped `<style lang="scss" scoped>` block in .vue files
- Theme overrides: Element UI defaults can be overridden in global styles via CSS variables or class-based selectors

## Special Directories

**node_modules/**
- Purpose: Installed npm/yarn dependencies
- Generated: Yes (installed via yarn/npm install)
- Committed: No (.gitignore excludes this)

**docs/**
- Purpose: Built/compiled output from webpack build process
- Generated: Yes (created by `npm run build` or `yarn build`)
- Committed: Likely yes (static files needed for deployment/distribution)

**.git/**
- Purpose: Version control metadata
- Generated: Yes (git repository)
- Committed: N/A (system directory)

**.planning/codebase/**
- Purpose: GSD codebase analysis documents (this directory)
- Generated: No (manually created)
- Committed: Yes (documentation reference)

---

*Structure analysis: 2026-02-19*
